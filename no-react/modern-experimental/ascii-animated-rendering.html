<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASCII Modern Experience</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #000;
            color: #fff;
            font-family: 'Courier New', Courier, monospace;
            overflow: hidden; /* Evita el scroll */
        }

        /* El contenedor del efecto ASCII */
        #ascii-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        /* Estilo para los caracteres que genera Three.js */
        #ascii-container table {
            margin: auto;
        }

        /* Capa de contenido de la Landing Page */
        .content {
            position: relative;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background: rgba(0, 0, 0, 0.4); /* Sombra suave para legibilidad */
            pointer-events: none; /* Permite interactuar con el fondo si fuera necesario */
        }

        h1 {
            font-size: 4rem;
            letter-spacing: 10px;
            text-transform: uppercase;
            margin: 0;
            text-shadow: 0 0 20px rgba(255,255,255,0.5);
        }

        p {
            font-size: 1.2rem;
            opacity: 0.8;
            max-width: 600px;
            text-align: center;
            line-height: 1.6;
        }

        .cta-button {
            margin-top: 30px;
            padding: 15px 40px;
            border: 1px solid #fff;
            background: transparent;
            color: #fff;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s;
            pointer-events: auto; /* El botón sí debe ser clickable */
            cursor: pointer;
        }

        .cta-button:hover {
            background: #fff;
            color: #000;
        }

        /* Ajuste para que el texto ASCII se vea bien */
        pre {
            font-size: 8px !important; /* Controla el tamaño de la "resolución" */
            line-height: 8px !important;
        }
    </style>
</head>
<body>

    <div id="ascii-container"></div>

    <div class="content">
        <h1>CYBER CORE</h1>
        <p>Experimenta la fusión entre el arte ASCII clásico y el renderizado 3D de última generación.</p>
        <a href="#" class="cta-button">EXPLORAR MÁS</a>
    </div>

    <!-- Cargamos Three.js desde CDN -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { AsciiEffect } from 'three/addons/effects/AsciiEffect.js';
        import { TrackballControls } from 'three/addons/controls/TrackballControls.js';

        let camera, scene, renderer, effect, cube;

        const start = Date.now();

        init();
        animate();

        function init() {
            // 1. Cámara
            camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 1, 1000);
            camera.position.y = 150;
            camera.position.z = 500;

            // 2. Escena
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0, 0, 0);

            // 3. Luces (Crucial para que el ASCII tenga sombras y profundidad)
            const pointLight1 = new THREE.PointLight(0xffffff, 3, 0, 0);
            pointLight1.position.set(500, 500, 500);
            scene.add(pointLight1);

            const pointLight2 = new THREE.PointLight(0xffffff, 1, 0, 0);
            pointLight2.position.set(-500, -500, -500);
            scene.add(pointLight2);

            // 4. Objeto (Un "Torus Knot" o nudo de donut, que queda genial en ASCII)
            const geometry = new THREE.TorusKnotGeometry(120, 40, 100, 16);
            const material = new THREE.MeshPhongMaterial({ flatShading: true });
            cube = new THREE.Mesh(geometry, material);
            scene.add(cube);

            // 5. Renderer normal (invisible)
            renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);

            // 6. El Efecto ASCII 
            // Parámetros: renderer, cadena de caracteres, opciones (invertir, resolución)
            effect = new AsciiEffect(renderer, ' .:-+*=%@#', { invert: true });
            effect.setSize(window.innerWidth, window.innerHeight);
            effect.domElement.style.color = 'white';
            effect.domElement.style.backgroundColor = 'black';

            // Añadir el canvas de texto al contenedor
            document.getElementById('ascii-container').appendChild(effect.domElement);

            window.addEventListener('resize', onWindowResize);
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            effect.setSize(window.innerWidth, window.innerHeight);
        }

        function animate() {
            requestAnimationFrame(animate);
            render();
        }

        function render() {
            const timer = Date.now() - start;

            // Animación del objeto
            cube.rotation.x = timer * 0.0003;
            cube.rotation.z = timer * 0.0002;

            effect.render(scene, camera);
        }
    </script>
</body>
</html>