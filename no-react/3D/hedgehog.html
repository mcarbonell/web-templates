<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Low Poly Hedgehog - WebGL 3D</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        body {
            background: linear-gradient(to bottom, #87CEEB 0%, #98D8E8 50%, #90EE90 100%);
            font-family: Arial, sans-serif;
            cursor: grab;
        }
        canvas {
            display: block;
            cursor: grab;
        }
        canvas:active {
            cursor: grabbing;
        }
        @media (max-width: 768px) {
            body {
                background: linear-gradient(to bottom, #87CEEB 0%, #90EE90 100%);
            }
        }
    </style>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script>
        let scene, camera, renderer, controls, hedgehog, time = 0;

        function init() {
            scene = new THREE.Scene();
            scene.fog = new THREE.FogExp2(0x87CEEB, 0.02);

            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 2, 5);

            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(0x87CEEB, 1);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            renderer.toneMapping = THREE.ACESFilmicToneMapping;
            renderer.toneMappingExposure = 1.2;
            document.body.appendChild(renderer.domElement);

            // Lighting
            const hemiLight = new THREE.HemisphereLight(0x87CEEB, 0x443322, 0.6);
            scene.add(hemiLight);

            const dirLight = new THREE.DirectionalLight(0xffffff, 0.9);
            dirLight.position.set(5, 10, 5);
            dirLight.castShadow = true;
            dirLight.shadow.mapSize.width = 2048;
            dirLight.shadow.mapSize.height = 2048;
            dirLight.shadow.camera.near = 0.5;
            dirLight.shadow.camera.far = 50;
            dirLight.shadow.camera.left = -10;
            dirLight.shadow.camera.right = 10;
            dirLight.shadow.camera.top = 10;
            dirLight.shadow.camera.bottom = -10;
            scene.add(dirLight);

            const ambientLight = new THREE.AmbientLight(0x404040, 0.4);
            scene.add(ambientLight);

            // Ground
            const groundGeo = new THREE.PlaneGeometry(100, 100, 20, 20);
            const groundMat = new THREE.MeshLambertMaterial({ color: 0x90EE90, flatShading: true });
            const ground = new THREE.Mesh(groundGeo, groundMat);
            ground.rotation.x = -Math.PI / 2;
            ground.position.y = -1.8;
            ground.receiveShadow = true;
            scene.add(ground);

            // Hedgehog Group
            hedgehog = new THREE.Group();

            // Body
            const bodyGeo = new THREE.IcosahedronGeometry(1.4, 1);
            const bodyMat = new THREE.MeshPhongMaterial({ color: 0x8B4513, flatShading: true, shininess: 10 });
            const body = new THREE.Mesh(bodyGeo, bodyMat);
            body.scale.set(1.3, 0.9, 1.4);
            body.position.y = 0.1;
            body.castShadow = true;
            body.receiveShadow = true;
            hedgehog.add(body);

            // Belly
            const bellyGeo = new THREE.SphereGeometry(1.1, 12, 8);
            const bellyMat = new THREE.MeshPhongMaterial({ color: 0xD2B48C, flatShading: true });
            const belly = new THREE.Mesh(bellyGeo, bellyMat);
            belly.scale.set(1.4, 0.6, 1.2);
            belly.position.y = -0.3;
            belly.castShadow = true;
            belly.receiveShadow = true;
            hedgehog.add(belly);

            // Head
            const headGeo = new THREE.IcosahedronGeometry(0.9, 1);
            const headMat = new THREE.MeshPhongMaterial({ color: 0xA0522D, flatShading: true });
            const head = new THREE.Mesh(headGeo, headMat);
            head.position.set(0, 0.5, 1.5);
            head.castShadow = true;
            head.receiveShadow = true;
            hedgehog.add(head);

            // Snout
            const snoutGeo = new THREE.ConeGeometry(0.25, 0.5, 5);
            const snoutMat = new THREE.MeshPhongMaterial({ color: 0xD2691E, flatShading: true });
            const snout = new THREE.Mesh(snoutGeo, snoutMat);
            snout.rotation.x = Math.PI * 0.15;
            snout.position.set(0.1, 0.45, 2.1);
            snout.castShadow = true;
            hedgehog.add(snout);

            // Nose
            const noseGeo = new THREE.SphereGeometry(0.08, 6, 6);
            const noseMat = new THREE.MeshPhongMaterial({ color: 0x333333, flatShading: true });
            const nose = new THREE.Mesh(noseGeo, noseMat);
            nose.position.set(0.2, 0.35, 2.35);
            hedgehog.add(nose);

            // Eyes
            const eyeGeo = new THREE.SphereGeometry(0.12, 6, 6);
            const eyeMat = new THREE.MeshPhongMaterial({ color: 0x111111, flatShading: true });
            const leftEye = new THREE.Mesh(eyeGeo, eyeMat);
            leftEye.position.set(-0.25, 0.65, 1.75);
            hedgehog.add(leftEye);
            const rightEye = leftEye.clone();
            rightEye.position.x = 0.25;
            hedgehog.add(rightEye);

            // Ears
            const earGeo = new THREE.ConeGeometry(0.18, 0.35, 4);
            const earMat = new THREE.MeshPhongMaterial({ color: 0x8B4513, flatShading: true });
            const leftEar = new THREE.Mesh(earGeo, earMat);
            leftEar.rotation.z = Math.PI / 3.5;
            leftEar.rotation.y = 0.2;
            leftEar.position.set(-0.45, 0.9, 1.4);
            leftEar.castShadow = true;
            hedgehog.add(leftEar);
            const rightEar = leftEar.clone();
            rightEar.rotation.z = -Math.PI / 3.5;
            rightEar.rotation.y = -0.2;
            rightEar.position.x = 0.45;
            hedgehog.add(rightEar);

            // Legs
            const legGeo = new THREE.CylinderGeometry(0.12, 0.18, 0.55, 6);
            const legMat = new THREE.MeshPhongMaterial({ color: 0x654321, flatShading: true });
            const legs = [[-0.55, -0.9, 0.4], [0.55, -0.9, 0.4], [-0.55, -0.9, -0.4], [0.55, -0.9, -0.4]];
            legs.forEach((pos, i) => {
                const leg = new THREE.Mesh(legGeo, legMat);
                leg.position.set(pos[0], pos[1], pos[2]);
                leg.rotation.z = (i % 2 ? -1 : 1) * (i < 2 ? 1 : -1) * 0.4;
                leg.castShadow = true;
                hedgehog.add(leg);
            });

            // Tail
            const tailGeo = new THREE.ConeGeometry(0.15, 0.25, 4);
            const tailMat = new THREE.MeshPhongMaterial({ color: 0x8B4513, flatShading: true });
            const tail = new THREE.Mesh(tailGeo, tailMat);
            tail.rotation.x = Math.PI / 2 + 0.4;
            tail.position.set(0, -0.1, -1.1);
            tail.castShadow = true;
            hedgehog.add(tail);

            // Spines (low poly quills)
            const spineGeo = new THREE.ConeGeometry(0.04, 0.35, 3);
            const spineMat = new THREE.MeshPhongMaterial({ color: 0x556B2F, flatShading: true });
            for (let i = 0; i < 85; i++) {
                const spine = new THREE.Mesh(spineGeo, spineMat);
                const angle = (i / 85) * Math.PI * 2.5;
                const radius = 1.1 + Math.sin(angle * 2.7) * 0.25;
                spine.position.x = Math.cos(angle) * 0.75;
                spine.position.y = 0.05 + Math.sin(angle * 1.8) * 0.35;
                spine.position.z = Math.sin(angle * 0.7) * 0.6 + 0.7;
                const target = new THREE.Vector3().copy(spine.position).normalize().multiplyScalar(3);
                spine.lookAt(target);
                spine.rotation.z += (Math.random() - 0.5) * 0.4;
                spine.scale.setScalar(0.7 + Math.random() * 0.6);
                hedgehog.add(spine);
            }

            hedgehog.position.y = -1;
            scene.add(hedgehog);

            // Controls
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.target.set(0, 0, 0);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.minDistance = 2;
            controls.maxDistance = 15;
            controls.maxPolarAngle = Math.PI / 2.2;
        }

        function animate() {
            requestAnimationFrame(animate);
            time += 0.01;

            // Animations
            hedgehog.rotation.y = time * 0.3;
            hedgehog.position.y = -1 + Math.sin(time * 3) * 0.08;
            const bob = Math.sin(time * 4) * 0.05;
            hedgehog.children.forEach((child, i) => {
                if (child.isMesh && child.geometry.type !== 'ConeGeometry') {
                    child.position.y += bob * (i % 3 === 0 ? 1 : 0.5);
                }
            });

            controls.update();
            renderer.render(scene, camera);
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        window.addEventListener('resize', onWindowResize);
        init();
        animate();
    </script>
</body>
</html>
